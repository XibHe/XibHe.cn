<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.2 -->
    <script>
        window.materialVersion = "1.5.2"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">














    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            组件化初探 | 
        
        XibHe&#39;s Blog
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" href="/img/favicon.png">

    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" itemprop="description" content="爱苹果,爱生活。">
    <meta name="keywords" content="null,组件化">
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?MKetZV3cUTfDxvMffaOezg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        
            
                <style id="prettify_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_css","/css/prettify.min.css?zp8STOU9v89XWFEnN+6YmQ==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
                <style id="prettify_theme"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_theme","/css/prettify/tranquil-heart.min.css?ul3p9I9MsbOxK0L+BHzDDg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
            
        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="XibHe&#39;s Blog">
    <meta name="msapplication-starturl" content="http://XibHe.github.io/2018/07/18/ModuleFirstExplore/">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="XibHe&#39;s Blog">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://XibHe.github.io/2018/07/18/ModuleFirstExplore/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="组件化初探 | XibHe&#39;s Blog">
    <meta property="og:image" content="/img/favicon.png">
    <meta property="og:description" content="爱苹果,爱生活。">
    <meta property="og:article:tag" content="组件化"> 

    
        <meta property="article:published_time" content="Wed Jul 18 2018 00:00:00 GMT+0800">
        <meta property="article:modified_time" content="Thu Jul 26 2018 19:29:04 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="http://XibHe.github.io/2018/07/18/ModuleFirstExplore/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "http://XibHe.github.io/2018/07/18/ModuleFirstExplore/index.html",
    "headline": "组件化初探",
    "datePublished": "Wed Jul 18 2018 00:00:00 GMT+0800",
    "dateModified": "Thu Jul 26 2018 19:29:04 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "XibHe",
        "image": {
            "@type": "ImageObject",
            "url": "/img/avatar.jpg"
        },
        "description": "It is never too late，Just do it better."
    },
    "publisher": {
        "@type": "Organization",
        "name": "XibHe&#39;s Blog",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/favicon.png"
        }
    },
    "keywords": ",组件化null",
    "description": "爱苹果,爱生活。",
}
</script>


    

    <!-- Analytics -->
    
    
        <script>
    var _hmt = _hmt || [];
    (function() {var hm = document.createElement('script');
    hm.src = 'https://hm.baidu.com/hm.js?919ef00558a82bb0e224f917f84d3124';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(hm, s);
    })();
</script>

    
    

    <!-- Custom Head -->
    

</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#现在项目中存在的问题"><span class="post-toc-number">1.</span> <span class="post-toc-text">现在项目中存在的问题</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#期望达到的效果"><span class="post-toc-number">2.</span> <span class="post-toc-text">期望达到的效果</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#组件划分粒度及其相互间的依赖"><span class="post-toc-number">3.</span> <span class="post-toc-text">组件划分粒度及其相互间的依赖</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#MVC-MVVM"><span class="post-toc-number">4.</span> <span class="post-toc-text">MVC MVVM</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#CoCoaPods-私有库"><span class="post-toc-number">5.</span> <span class="post-toc-text">CoCoaPods 私有库</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-使用模板快速创建测试工程（组件所在的工程）"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">1.使用模板快速创建测试工程（组件所在的工程）</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-在-GitLab-上创建一个用来存放基础组件的仓库LZBasisComponents"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">2.在 GitLab 上创建一个用来存放基础组件的仓库LZBasisComponents</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-配置私有库的-podspec-文件"><span class="post-toc-number">5.3.</span> <span class="post-toc-text">3.配置私有库的 .podspec 文件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-将上面创建的模板工程，提交到-GitLab-上创建的远程代码仓库中"><span class="post-toc-number">5.4.</span> <span class="post-toc-text">4.将上面创建的模板工程，提交到 GitLab 上创建的远程代码仓库中</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-cd-到-模板工程所在的-Example-对应的私有库目录"><span class="post-toc-number">5.4.1.</span> <span class="post-toc-text">1. cd 到 模板工程所在的 Example 对应的私有库目录</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-可以先查看当前工程文件的状态，红色为未提交"><span class="post-toc-number">5.4.2.</span> <span class="post-toc-text">2. 可以先查看当前工程文件的状态，红色为未提交</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-提交到暂缓区"><span class="post-toc-number">5.4.3.</span> <span class="post-toc-text">3. 提交到暂缓区</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-将本地库与远程代码仓库进行关联"><span class="post-toc-number">5.4.4.</span> <span class="post-toc-text">4. 将本地库与远程代码仓库进行关联</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-初始化提交"><span class="post-toc-number">5.4.5.</span> <span class="post-toc-text">5. 初始化提交</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-将本地分支的更新，推送到远程主机"><span class="post-toc-number">5.4.6.</span> <span class="post-toc-text">6. 将本地分支的更新，推送到远程主机</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#7-给远程组件库打-tag"><span class="post-toc-number">5.4.7.</span> <span class="post-toc-text">7. 给远程组件库打 tag</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-主工程中使用-CoCoaPods-导入私有组件库"><span class="post-toc-number">5.5.</span> <span class="post-toc-text">5.主工程中使用 CoCoaPods 导入私有组件库</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#组件之间及各组件与主工程间通讯-中间件"><span class="post-toc-number">6.</span> <span class="post-toc-text">组件之间及各组件与主工程间通讯(中间件)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#新增基于-CTMediator-的组件-LZMediator"><span class="post-toc-number">6.1.</span> <span class="post-toc-text">新增基于 CTMediator 的组件 LZMediator</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#新建与其它组件通讯的中间件"><span class="post-toc-number">6.2.</span> <span class="post-toc-text">新建与其它组件通讯的中间件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#在中间件中新增用于通讯的-LZMediator-类别"><span class="post-toc-number">6.3.</span> <span class="post-toc-text">在中间件中新增用于通讯的 LZMediator 类别</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#在-target-action-所在的组件中增加提供服务的类"><span class="post-toc-number">6.4.</span> <span class="post-toc-text">在 target-action 所在的组件中增加提供服务的类</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#在其它组件中调用中间件的方法进行通讯"><span class="post-toc-number">6.5.</span> <span class="post-toc-text">在其它组件中调用中间件的方法进行通讯</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#原工程中资源文件的处理"><span class="post-toc-number">7.</span> <span class="post-toc-text">原工程中资源文件的处理</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#受工期影响"><span class="post-toc-number">8.</span> <span class="post-toc-text">受工期影响</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#抽离各模块功能组件遇到的问题及解决方式"><span class="post-toc-number">9.</span> <span class="post-toc-text">抽离各模块功能组件遇到的问题及解决方式</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#后记"><span class="post-toc-number">10.</span> <span class="post-toc-text">后记</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#参考资料"><span class="post-toc-number">11.</span> <span class="post-toc-text">参考资料</span></a></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        <!-- Custom Thumbnail -->
        <div class="post_thumbnail-custom mdl-card__media mdl-color-text--grey-50" style="background-image:url(http://odchyrav4.bkt.clouddn.com/ModuleFirstExplore_headerThumbnail.jpg)">
    
            <p class="article-headline-p">
                组件化初探
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.jpg" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>XibHe</strong>
        <span>7月 18, 2018</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    
        <button id="article-functions-qrcode-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">devices other</i>
    <span class="visuallyhidden">devices other</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-qrcode-button">
    <li class="mdl-menu__item">在其它设备中阅读本文章</li>
    
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPYAAAD2CAAAAADAeSUUAAAC1UlEQVR42u3aQW4jMQwEQP//09lrLhl0i/LClmpOxsCRVcqBIFuvnyufFzY2NjY2NjY2NvZHsl/xEy3965vP6zy/T36l3TM2Njb22ewck/D++s7z52fehj1jY2NjX8CeA57fPP9KcsRre8bGxsbGnpSf/P1z6UqOGxsbGxu7ZU9KVzIket4nNjY2NvbagCY5lLbgJaHCWoSAjY2NfQ87D00/5/N/zbexsbGxP5jdPnnjMV85L1fR+tjY2NiHsts2IB8DPcMmlzLXLoliY2Njn8puxz3t4Ol5Q/n7vLD9+R4bGxv7MnZbYN7X0iQHF62DjY2NfSi7HrKXBSkpezmsbXuwsbGx72EnTUU79Jm0Fkn53FDAsLGxsQ9lr42Z1oKEtatCG4ZK2NjY2Aex80KVA/KSNomH86KLjY2NfRs7H+5MWpc2bNhQ2LCxsbGPZk9G/HmUu9bYtCF0FA9gY2NjH8eeR7wJKdniJHLYULexsbGxv5Cd8NqoYFJmkoNe+/dgY2Njn8re1XLMh1OThiRqqLCxsbGPZr8j4m0v9yRNUX5kRQeGjY2N/eXsyfXHvGFowbtGVNjY2Nj3sCelaG04tXagSTGrZ2nY2NjYX85uW4X2sIrxfRkV5Bc3sbGxsW9g5yFuMY4PAtq8EdpQULGxsbEPZW8IUINo4Wf85L9bxAPY2NjYx7HbQjKh5itMVsPGxsa+jZ03HrvamPyw5hd3sLGxsW9g5+Vq11byI1i7BoqNjY19A3s+3Hne9OTaTT7kSgohNjY29qnstcC1Heu0IcSkcBZDJWxsbOyD2GtDora1yNuJfOSUNyTY2NjYN7Dzraz97VrcO7msiY2NjY2dtxl5+9EOodpyNUpFsLGxsa9h51tvrwS1w6zkiLGxsbHvYbfhbhL9tldzkqKVlzpsbGzse9jt+H6tXckZ7Xfenm9jY2NjfzD7ngcbGxsbGxsbGxv7Y55/ZLGRA9AHbKQAAAAASUVORK5CYII=">
    
</ul>

    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/组件化/">组件化</a>
    </ul>
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=组件化初探&url=http://XibHe.github.io/2018/07/18/ModuleFirstExplore/index.html&pic=http://XibHe.github.io/img/favicon.png&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=组件化初探&url=http://XibHe.github.io/2018/07/18/ModuleFirstExplore/index.html&via=XibHe" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://XibHe.github.io/2018/07/18/ModuleFirstExplore/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=XibHe&#39;s Blog&title=组件化初探&summary=爱苹果,爱生活。&pics=http://XibHe.github.io/img/favicon.png&url=http://XibHe.github.io/2018/07/18/ModuleFirstExplore/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <p>项目经过三年多的迭代，总共有三拨人接手，代码整体风格各异，迭代后的旧代码与新代码揉在一起，难解难分。各功能模块间相互依赖，头文件多次重复引用，编译一次大概花费5分钟。不得不进行代码组件化后重构。关于应用架构以及组件化的方案 <a href="https://casatwy.com/iOS-Modulization.html" target="_blank" rel="external">casatwy</a> 已经说得很透彻了，在这里我就没有必要再班门弄斧了。这篇文章主要是记录自己项目组件化时如何拆分各个功能模块？抽离组件遇到了哪些问题？阶段性测试时遇到了哪些棘手的问题？因此，这篇文章的实践性较强，希望可以解决各位在组件化过程中遇到大部分问题。</p>
<h2 id="现在项目中存在的问题"><a href="#现在项目中存在的问题" class="headerlink" title="现在项目中存在的问题"></a>现在项目中存在的问题</h2><p>代码不够整齐，目录结构混乱，分类不够明确，随着一次次的版本迭代，增加了不同的业务线，开发人员变动比较频繁，工程越来越臃肿。莫名其妙的继承关系，Base类，Expand类，Category混乱，三者之间存在重复的功能，这也为后面提到的在组件化过程中遇到一个棘手问题埋下了炸弹。</p>
<h2 id="期望达到的效果"><a href="#期望达到的效果" class="headerlink" title="期望达到的效果"></a>期望达到的效果</h2><ol>
<li>解除各个功能模块间的依赖；</li>
<li>可以单独引入并测试某一个功能组件；</li>
<li>功能与功能之间不再相互引用重复的未使用到的类；</li>
<li>将一个单一的工程项目，分解成各个独立的组件，然后按照某种方式，任意组合成一个拥有完整业务逻辑的工程。</li>
</ol>
<h2 id="组件划分粒度及其相互间的依赖"><a href="#组件划分粒度及其相互间的依赖" class="headerlink" title="组件划分粒度及其相互间的依赖"></a>组件划分粒度及其相互间的依赖</h2><p>组件化是为了解决项目中遇到的问题，不是为了组件化而组件化。模块的划分，以及模块的扩展性，可以增加新的模块，为将来业务的拓展留有余地。基础模块的划分很重要，其他的模块都是建立在基础模块之上的。</p>
<blockquote>
<p>兵马未动，基础组件先行。</p>
</blockquote>
<ul>
<li>基础组件(LZBasisComponents)：基本配置(常量，宏)，分类(各类系统类的拓展)，网络(AFN的封装)，工具类(loading，字符串操作，日期格式处理，文件操作等)</li>
<li>数据库组件(LZDataBaseComponents)：封装了各个功能模块的数据库增，删，改，查的基本操作，基于 <em>FMDB</em> 封装了基本的 <em>SQLite</em> 数据库操作；</li>
<li>功能组件(LZFunctionComponents)：主要用来存放一些自定义控件，eg.自定义弹出窗，错误信息提示View，自定义KeyBoardView，一些按钮和label；</li>
<li>登录组件(LZLoginComponents)：项目中通过登录操作初始化一些基本配置，配置账号体系下用户所能使用的权限。基于登录功能业务上衍生了广告页，热门活动宣传页，某个版本需要强制升级的弹出窗，以及用户协议等功能。</li>
<li>登录中间件(LZLoginComponents_Category)：主要用来处理登录组件(LZLoginComponents)与主工程之间的数据通讯；</li>
<li>工具箱组件(LZToolsComponents)：项目中处理不同设备间数据同步的功能，页面展示的权限控制功能。</li>
</ul>
<blockquote>
<p>自顶向下设计，自底向上实现，先测量，后优化。— casatwy</p>
</blockquote>
<p>以上所列的 <em>6</em> 个组件可以统称为项目基础组件，自基础向上延伸到其他功能模块，为其他模块提供底层支持，同时，在生成私有库时，其他功能模块也要与之建立起依赖关系。</p>
<p>这里数据的持久化基于数据库组件，其中公共类的维护 (以数据库组件为例，每个人维护自己模块下的数据库操作类。eg.LZDatabaseHelper+PatientModel 即为，患者组件下对应的所有患者的数据库操作，处理后的数据以 PatientModel 为存储形式。)</p>
<blockquote>
<p>找到所有需要的模块， 把模块放在该放的地方。 — casatwy</p>
</blockquote>
<p>一个公共模块，如果多个模块都会用到，那么最好是将它抽成一个组件。eg. LZToolsComponents组件中，就存放了一些工具类，这些工具类无法下沉到基础组件中。但其它模块却会用到。</p>
<blockquote>
<p>高内聚，低耦合。</p>
</blockquote>
<p>接下来按功能模块划分组件就比较直观了，比较典型的就是根据 <em>TableBar</em> 来划分，这里适用于大部分 App 的功能模块。以下这些功能组件的划分才是组件化划分的核心所在，也只有将功能组件独立出来，才能达到高内聚，低耦合的目的。</p>
<ul>
<li>工作台组件(LZWorkTableComponents)：主要处理项目中核心功能 — 开方，该模块下由三个小模块组成；</li>
<li>药房管理组件(LZPharmacyComponents)：涉及到药品库存管理的模块；</li>
<li>患者管理组件(LZPatientManageComponent)：管理患者个人就诊信息；</li>
<li>我的模块(LZMineComponents)：配置用户的个人信息，设置处方模板，管理诊所子账号，增值服务，账号设置，配置外接硬件(蓝牙打印机，激光打印机，扫码枪)等</li>
<li>所有H5功能组件(LZWebViewComponents)：该组件统一管理统计报表，专家咨询，知识课堂，活动商城等功能模块的 <em>web</em> 页面。</li>
</ul>
<p>以上各功能组件都分别对应各自的中间件，用来同其他功能组件进行通讯。如下，</p>
<ul>
<li>工作台中间件(LZWebViewComponents_category)</li>
<li>药房管理中间件(LZPharmacyComponents_Category)</li>
<li>患者管理组件(LZPatientManageComponent_Category)</li>
<li>我的中间件(LZMineComponents_Category)</li>
<li>H5交互中间件(LZWebViewComponents_category)</li>
</ul>
<p>以上是基础组件和功能组件的划分，正是有了这些泾渭分明的区分，才能为组件化之间解耦提供基础的支持。</p>
<h2 id="MVC-MVVM"><a href="#MVC-MVVM" class="headerlink" title="MVC MVVM"></a>MVC MVVM</h2><p>MVC架构，MVVM架构的，这种层次划分，主要是针对数据流动的方向而言的</p>
<p>以解决问题为主，而不是生搬硬套架构。</p>
<h2 id="CoCoaPods-私有库"><a href="#CoCoaPods-私有库" class="headerlink" title="CoCoaPods 私有库"></a>CoCoaPods 私有库</h2><p>通过 <em>cocopods</em> 把组件打包成单独的 <em>私有pod</em> 库来进行管理，这样就可以通过 <em>podfile</em> 文件，进行动态的增删和版本管理了。</p>
<h3 id="1-使用模板快速创建测试工程（组件所在的工程）"><a href="#1-使用模板快速创建测试工程（组件所在的工程）" class="headerlink" title="1.使用模板快速创建测试工程（组件所在的工程）"></a>1.使用模板快速创建测试工程（组件所在的工程）</h3><blockquote>
<p>$ pod lib create LZBasisComponents</p>
</blockquote>
<p><img src="http://odchyrav4.bkt.clouddn.com/ModuleFirstExplore_cocoaPods01.jpeg" alt="创建模板工程"></p>
<p>按照提示，填写完以上信息后， Xcode 会自动打开创建的测试工程，在测试工程的文件夹下，可以看到的路径如下，</p>
<p><img src="http://odchyrav4.bkt.clouddn.com/ModuleFirstExplore_cocoaPods02.png" alt="模板工程文件路径"></p>
<p>其中，将抽离出的基础组件<em>LZBasisComponents</em>托至 <em>Classes</em> 文件夹下，此时，<em>cd</em> 到模板工程 <em>Example</em> 所在目录，执行</p>
<blockquote>
<p>$ pod install</p>
</blockquote>
<p>我们就可以在测试组件的模板工程中修改文件了。</p>
<h3 id="2-在-GitLab-上创建一个用来存放基础组件的仓库LZBasisComponents"><a href="#2-在-GitLab-上创建一个用来存放基础组件的仓库LZBasisComponents" class="headerlink" title="2.在 GitLab 上创建一个用来存放基础组件的仓库LZBasisComponents"></a>2.在 GitLab 上创建一个用来存放基础组件的仓库LZBasisComponents</h3><p>这里使用开源的 <em>GitLab</em> 作为代码托管的 <em>git</em> 服务器，安装完成后可以在上面新建组件。当然也可以付费使用基于 GitHub 托管，免费的有 <em><a href="https://gitee.com" target="_blank" rel="external">码云</a></em> 和 <em><a href="https://coding.net" target="_blank" rel="external">码市</a></em>。</p>
<h3 id="3-配置私有库的-podspec-文件"><a href="#3-配置私有库的-podspec-文件" class="headerlink" title="3.配置私有库的 .podspec 文件"></a>3.配置私有库的 .podspec 文件</h3><p>在上文中生成模板工程的同时，也会生成一个 <em>. podspec</em> 的文件。我们需要单独设置该文件，之所以配置 <em>.podspec</em> 文件，是为了将本地私有库与 <em>GitLab</em> 上远程私有库进行关联，多人开发时通过远程私有组件库进行代码的同步。远程索引库 <em>. podspec</em> 即，组件描述文件，里面描述了组件文件的源码地址，框架简介，私有库作者，版本号，资源文件路径等信息。我们使用 <strong>$ pod search</strong> 检索索引文件，找到 <em>. podspec</em> 中的源码地址，然后将项目down到本地。其主要配置如下，</p>
<pre><code class="js">s.name         = &quot;LZBasisComponents&quot;
s.version      = &quot;1.2.2.1&quot;
s.summary      = &quot;LZBasisComponents.&quot;

s.homepage     = &quot;http://192.168.11.11/CloudOfficeModulization/LZBasisComponents&quot;
s.license      = { :type =&gt; &quot;MIT&quot;, :file =&gt; &quot;FILE_LICENSE&quot; }
s.author       = &quot;xibHe&quot;
s.platform     = :ios, &quot;8.4&quot;

s.source       = { :git =&gt; &quot;http://192.168.11.11/CloudOfficeModulization/LZBasisComponents.git&quot;, :tag =&gt; s.version.to_s }
s.source_files  = &quot;LZBasisComponents/LZBasisComponents/Classes/**/*.{h,m}&quot;

s.resource_bundles = {
&#39;LZBasisComponents&#39; =&gt; [&#39;LZBasisComponents/LZBasisComponents/Assets/*.{png,plist}&#39;]
}

s.requires_arc = true

s.dependency &quot;Masonry&quot;, &#39;~&gt; 1.1.0&#39;
s.dependency &quot;YYKit&quot;, &#39;~&gt; 1.0.9&#39;
s.dependency &quot;ReactiveObjC&quot;
</code></pre>
<p>具体的配置如下：</p>
<ul>
<li><em>s.homepage</em> 组件在 <em>GitLab</em> 的主页面</li>
<li><em>s.source</em> 真实组件的地址，在 <em>GitLab</em> 中新建库时会生成该地址</li>
<li><em>s.source_files</em> 组件中对应目录下的文件夹</li>
<li><em>s.resource_bundles</em> 存放资源文件的类型</li>
<li><em>s.dependency</em> 依赖其他的框架或组件</li>
</ul>
<p>这里是组件中用到的主要的配置，还有其它的与私有 <em>pod</em> 相关的配置。</p>
<p>注意: 组件的依赖关系，各个组件中的 <em>.podspec</em> 文件中通过 <em>s.dependency</em> 设置了该组件与其他三方框架或者其他业务组件的依赖关系，这里各个组件前期可以暂时依赖其他业务组件，但后期当所有组件抽出后，需要解除与其他业务组件的依赖关系。即，将 <em>s.dependency</em> 下的依赖注释掉。</p>
<h3 id="4-将上面创建的模板工程，提交到-GitLab-上创建的远程代码仓库中"><a href="#4-将上面创建的模板工程，提交到-GitLab-上创建的远程代码仓库中" class="headerlink" title="4.将上面创建的模板工程，提交到 GitLab 上创建的远程代码仓库中"></a>4.将上面创建的模板工程，提交到 GitLab 上创建的远程代码仓库中</h3><p>主要是通过 <em>git</em> 命令上传，如下</p>
<h4 id="1-cd-到-模板工程所在的-Example-对应的私有库目录"><a href="#1-cd-到-模板工程所在的-Example-对应的私有库目录" class="headerlink" title="1. cd 到 模板工程所在的 Example 对应的私有库目录"></a>1. cd 到 模板工程所在的 <em>Example</em> 对应的私有库目录</h4><h4 id="2-可以先查看当前工程文件的状态，红色为未提交"><a href="#2-可以先查看当前工程文件的状态，红色为未提交" class="headerlink" title="2. 可以先查看当前工程文件的状态，红色为未提交"></a>2. 可以先查看当前工程文件的状态，红色为未提交</h4><blockquote>
<p>git status </p>
</blockquote>
<h4 id="3-提交到暂缓区"><a href="#3-提交到暂缓区" class="headerlink" title="3. 提交到暂缓区"></a>3. 提交到暂缓区</h4><blockquote>
<p>git add .</p>
</blockquote>
<h4 id="4-将本地库与远程代码仓库进行关联"><a href="#4-将本地库与远程代码仓库进行关联" class="headerlink" title="4. 将本地库与远程代码仓库进行关联"></a>4. 将本地库与远程代码仓库进行关联</h4><blockquote>
<p>git remote add origin <a href="http://192.168.11.11/CloudOfficeModulization/LZBasisComponents.git" target="_blank" rel="external">http://192.168.11.11/CloudOfficeModulization/LZBasisComponents.git</a></p>
</blockquote>
<h4 id="5-初始化提交"><a href="#5-初始化提交" class="headerlink" title="5. 初始化提交"></a>5. 初始化提交</h4><blockquote>
<p>git commit -m “Initial commit”</p>
</blockquote>
<h4 id="6-将本地分支的更新，推送到远程主机"><a href="#6-将本地分支的更新，推送到远程主机" class="headerlink" title="6. 将本地分支的更新，推送到远程主机"></a>6. 将本地分支的更新，推送到远程主机</h4><blockquote>
<p>git push -u origin master</p>
</blockquote>
<h4 id="7-给远程组件库打-tag"><a href="#7-给远程组件库打-tag" class="headerlink" title="7. 给远程组件库打 tag"></a>7. 给远程组件库打 tag</h4><blockquote>
<p>git tag ‘1.2.2.1’  </p>
<p>git push origin ‘1.2.2.1’</p>
</blockquote>
<p>保持 <em>s.version</em> = “1.2.2.1” 的版本与远程私有库的 <em>tag</em> 一致。</p>
<h3 id="5-主工程中使用-CoCoaPods-导入私有组件库"><a href="#5-主工程中使用-CoCoaPods-导入私有组件库" class="headerlink" title="5.主工程中使用 CoCoaPods 导入私有组件库"></a>5.主工程中使用 CoCoaPods 导入私有组件库</h3><p>打开并编辑主工程中的 <em>Podfile</em> 文件，如下，</p>
<pre><code class="js">platform :ios, &#39;8.4&#39;

source &#39;http://192.168.11.11/CloudOfficeModulization/CloudOfficeSpec.git&#39;
source &#39;https://github.com/CocoaPods/Specs.git&#39;

workspace &#39;CloudOffice.xcworkspace&#39;
#use_frameworks!
inhibit_all_warnings!

def common_pods
    pod &#39;LZBasisComponents&#39;, :path =&gt; &#39;/Users/huahua/Documents/Module/LZBasisComponents&#39;

end

target  ‘CloudOffice’ do

    common_pods

end

target  ‘CloudOfficeTest’ do

    common_pods

end

target  ‘CloudOfficeTrial’ do

    common_pods

end
</code></pre>
<p>通过命令 <strong>pod repo</strong> 查看本地已存在的索引库，</p>
<pre><code class="js">14-cloudofficemodulization-cloudofficespec
- Type: git (master)
- URL:  http://192.168.11.11/CloudOfficeModulization/CloudOfficeSpec.git
- Path: /Users/huahua/.cocoapods/repos/14-cloudofficemodulization-cloudofficespec

master
- Type: git (master)
- URL:  https://github.com/CocoaPods/Specs.git
- Path: /Users/huahua/.cocoapods/repos/master
</code></pre>
<p><em>GitLab</em> 中远程私有库的地址：</p>
<pre><code class="js">source &#39;http://192.168.11.11/CloudOfficeModulization/CloudOfficeSpec.git&#39;
</code></pre>
<p>公有库的地址：</p>
<pre><code class="js">source &#39;https://github.com/CocoaPods/Specs.git&#39;
</code></pre>
<p>cd 到主工程 <em>Podfile</em> 文件所在目录，执行 <strong>pod instal</strong> 命令，再次打开项目就可以在 <em>Pods</em> 文件夹下的 <em>Development Pods</em> 文件夹中找到 <em>LZBasisComponents</em> 组件。</p>
<p>注意：pod ‘LZBasisComponents’, :path =&gt;’/Users/huahua/Documents/Module/LZBasisComponents’ 对应的路径可以是存放本地私有库(已update远程私有库)的路径，也可以是 <em>步骤4</em> 中对应的远程私有库，可以通过通过 tag 来导入不同的私有组件库的版本，如下：</p>
<pre><code class="js">pod &#39;LZBasisComponents&#39;, &#39;~&gt; 1.2.2.1&#39;
</code></pre>
<p>也可以通过 <em>SourceTree</em> 或者 <em>GitHub Desktop</em> 等拥有可视化界面的项目版本控制软件，进行 <em>git</em> 项目私有库的管理。</p>
<h2 id="组件之间及各组件与主工程间通讯-中间件"><a href="#组件之间及各组件与主工程间通讯-中间件" class="headerlink" title="组件之间及各组件与主工程间通讯(中间件)"></a>组件之间及各组件与主工程间通讯(中间件)</h2><p>目前市面上有两种组件间的通讯方式：</p>
<ol>
<li>利用 <em>url-scheme</em> 方案</li>
<li>利用 <em>runtime</em> 实现的 <em>target-action</em> 方法</li>
</ol>
<p>两种方式都对应一些开源库，如下</p>
<p><strong>URL-Scheme库：</strong></p>
<ol>
<li><a href="https://github.com/joeldev/JLRoutes" target="_blank" rel="external">JLRoutes</a></li>
<li><a href="https://github.com/clayallsopp/routable-ios" target="_blank" rel="external">routable-ios</a></li>
<li><a href="https://github.com/lightory/HHRouter" target="_blank" rel="external">HHRouter</a></li>
<li><a href="https://github.com/mogujie/MGJRouter" target="_blank" rel="external">MGJRouter</a></li>
</ol>
<p><strong>Target-Action库：</strong></p>
<ol>
<li><a href="https://github.com/casatwy/CTMediator" target="_blank" rel="external">CTMediator</a></li>
</ol>
<p>采用 <em>url-scheme</em> 方案，要本地调用和远程调用之间如何相互调用？提供给 <em>url</em> 什么样的参数？如何处理非常规对象与本地组件间的调度？</p>
<blockquote>
<p>在iOS领域里，一定是组件化的中间件为openUrl提供服务，而不是openUrl方式为组件化提供服务。 — casatwy</p>
<p>URL注册对于实施组件化方案是完全不必要的，且通过URL注册的方式形成的组件化方案，拓展性和可维护性都会被打折。 — casatwy</p>
</blockquote>
<p>采用 <em>runtime</em> 实现的 <em>target-action</em> 方法</p>
<blockquote>
<p>注册 <em>URL</em> 的目的其实是一个服务发现的过程，在iOS领域中，服务发现的方式是不需要通过主动注册的，使用 <em>runtime</em> 就可以了。另外，注册部分的代码的维护是一个相对麻烦的事情，每一次支持新调用时，都要去维护一次注册列表。如果有调用被弃用了，是经常会忘记删项目的。<em>runtime</em> 由于不存在注册过程，那就也不会产生维护的操作，维护成本就降低了。</p>
<p>由于通过 <em>runtime</em> 做到了服务的自动发现，拓展调用接口的任务就仅在于各自的模块，任何一次新接口添加，新业务添加，都不必去主工程做操作，十分透明。— casatwy</p>
</blockquote>
<p>组件之间的交互，通过 <em>Action</em> 暴露可调用接口，所有组件都通过组件自带的<em>Target-Action</em> 来响应，也就是说，模块与模块之间的接口被固化在了 <em>Target-Action</em> 这一层，避免了实施组件化的改造过程中，对业务层的侵入，同时也提高了组件化接口的可维护性。 </p>
<p>基于以上原因，这里我推荐 <em>Target-Action</em> 方案。具体操作流程如下，</p>
<h3 id="新增基于-CTMediator-的组件-LZMediator"><a href="#新增基于-CTMediator-的组件-LZMediator" class="headerlink" title="新增基于 CTMediator 的组件 LZMediator"></a>新增基于 CTMediator 的组件 LZMediator</h3><p>基于 <a href="https://github.com/casatwy/CTMediator" target="_blank" rel="external">CTMediator</a> 新建用于传递组件讯息的组件 <em>LZMediator</em>，该组件参考 <a href="https://github.com/casatwy/CTMediator" target="_blank" rel="external">CTMediator</a> 中的 <em>CTMediator</em> 类，做了一些简化处理。具体创建操作参照上文中使用 <em>CoCoaPods</em> 建立私有库，这里就不再赘述了。</p>
<h3 id="新建与其它组件通讯的中间件"><a href="#新建与其它组件通讯的中间件" class="headerlink" title="新建与其它组件通讯的中间件"></a>新建与其它组件通讯的中间件</h3><p>这里的所说的中间件也是以 <em>pod</em> 私有库的形式存在于项目中，其仍是代表不同功能模块的组件。以工作台组件（<em>LZWorkTableComponents</em>）为例，其它组件若想调用工作台组件中的某个控制器时，不能直接调用，而是需要通过工作台中间件（<em>LZWorkTableComponents_Category</em>）暴露的接口调用。同上文中使用<em>CoCoaPods</em> 建立私有库一样，先生成模板工程，然后上传到 <em>GitLab</em> 远程代码厂库中。唯一需要注意的是：需要在工作台中间件的 <em>.podspec</em> 文件中，增加对<em>LZMediator</em> 组件的依赖，如下：</p>
<pre><code class="js">s.dependency &quot;LZMediator&quot;
</code></pre>
<p>通过这种依赖关系，将 <em>LZMediator</em> 引入到工程中。</p>
<h3 id="在中间件中新增用于通讯的-LZMediator-类别"><a href="#在中间件中新增用于通讯的-LZMediator-类别" class="headerlink" title="在中间件中新增用于通讯的 LZMediator 类别"></a>在中间件中新增用于通讯的 LZMediator 类别</h3><p>在上面新建的工作台中间件（<em>LZWorkTableComponents_Category</em>）中新建基于 <em>LZMediator</em> 的类别，注意统一类别的名称，以工作台中间件为例，最终生成的类名为：<em>LZMediator+LZWorkTableComponents.h</em> 和 <em>LZMediator+LZWorkTableComponents.m</em> 接下来就是按照基于 <em>Mediator</em> 的一套逻辑，通过实现 <em>target-action</em> 的方法来进行不同组件间的通讯。例如，某个组件需要调用工作台组件中的某个控制器时，</p>
<p><em>LZMediator+LZWorkTableComponents.h</em> 中声明中间件调用的返回工作台组件中某个控制器的实例方法：</p>
<pre><code class="objectivec">#pragma mark - 患者管理组件调用
/**
 看病开方详情页面
 @return 返回实例
 */
- (UIViewController *)LZWorkTableComponents_newDoctorPrescribingViewControllerWithDic:(NSDictionary *)params;
</code></pre>
<p><em>LZMediator+LZWorkTableComponents.m</em> 中实现该方法：</p>
<pre><code class="objectivec">#pragma mark - 统一前缀
NSString *const kLZMediatorTarget_LZWorkTableComponents = @&quot;LZWorkTableComponents&quot;;

#pragma mark - 方法名称
NSString *const kLZMediatorAction_newDoctorPrescribingViewController = @&quot;newDoctorPrescribingViewController&quot;;  // 看病开方详情页面

- (UIViewController *)LZWorkTableComponents_newDoctorPrescribingViewControllerWithDic:(NSDictionary *)params
{
    UIViewController *viewController = [self performTarget:kLZMediatorTarget_LZWorkTableComponents action:kLZMediatorAction_newDoctorPrescribingViewController params:params shouldCacheTarget:NO];
    if ([viewController isKindOfClass:[UIViewController class]]) {
        return viewController;
    }
    return [UIViewController new];
}
</code></pre>
<p>这里需要注意方法中传递的参数 <em>kLZMediatorTarget_LZWorkTableComponents</em> 和 <em>kLZMediatorAction_newDoctorPrescribingViewController</em> 分别对应工作台组件中 <em>target-action</em> 所在的模块 (也就是提供服务的模块，这也是单独的repo，但无需被其他人依赖，其他人通过category调用这里的功能），这两个参数，前者对应的是 <em>target-action</em> 所在组件中的以 <em>Target_</em> 为前缀的类，后者对应该类里的具体的以 <em>Action_</em> 为前缀声明的某个方法。前面所说的利用 <em>runtime</em> 实现的 <em>target-action</em> 方法，指的正是这个地方。</p>
<p>注意: 这两个参数值，一定要与工作台组件中 <em>Target</em> 目录下的类名相一致!!! 切记！ 切记！ 切记！ </p>
<h3 id="在-target-action-所在的组件中增加提供服务的类"><a href="#在-target-action-所在的组件中增加提供服务的类" class="headerlink" title="在 target-action 所在的组件中增加提供服务的类"></a>在 target-action 所在的组件中增加提供服务的类</h3><p>在工作台组件（<em>LZWorkTableComponents</em>）中 <em>Target</em> 目录下新建名称为： <em>Target_LZWorkTableComponents</em> 继承于 <em>NSObject</em> 的类，这个类的命名规则与上面说的 <em>kLZMediatorTarget_LZWorkTableComponents</em> 参数相一致，然后新增方法，方法名以前缀 <em>Action_</em> 开头，同样需要与上面说的<em>kLZMediatorAction_newDoctorPrescribingViewController</em> 参数相一致。如下：</p>
<p><em>Target_LZWorkTableComponents.h</em> 中声明中间件调用的返回工作台组件中某个控制器的实例方法：</p>
<pre><code class="objectivec">#pragma mark - 患者管理组件调用
/**
 返回LZNewDoctorPrescribingViewController实例
 */
- (UIViewController *)Action_newDoctorPrescribingViewController:(NSDictionary *)param;
</code></pre>
<p><em>Target_LZWorkTableComponents.m</em> 中实现该方法：</p>
<pre><code class="objectivec">#import &lt;LZDataBaseComponents/PationModel.h&gt;
#import &quot;LZNewDoctorPrescribingViewController.h&quot;

/**
 返回LZNewDoctorPrescribingViewController实例

 @param param 患者dictionary
 @return LZNewDoctorPrescribingViewController实例
 */
- (UIViewController *)Action_newDoctorPrescribingViewController:(NSDictionary *)param
{
    PationModel *pationModel = [[PationModel alloc] init];
    [pationModel setValuesForKeysWithDictionary:param];

    LZNewDoctorPrescribingViewController *newDoctorPrescribinVC = [[LZNewDoctorPrescribingViewController alloc] init];
    newDoctorPrescribinVC.model = pationModel;

    return newDoctorPrescribinVC;
}
</code></pre>
<p>这里 <em>PationModel</em> 为数据库组件中的类，需要注意一下这里使用尖括号引入的头文件，<em>LZNewDoctorPrescribingViewController</em> 控制器为工作台组件中的类。</p>
<h3 id="在其它组件中调用中间件的方法进行通讯"><a href="#在其它组件中调用中间件的方法进行通讯" class="headerlink" title="在其它组件中调用中间件的方法进行通讯"></a>在其它组件中调用中间件的方法进行通讯</h3><p>这里仍以工作台组件（<em>LZWorkTableComponents</em>）为例，比如，在患者组件中想跳转至工作台组件中的看病开方详情页（<em>LZNewDoctorPrescribingViewController</em>），需要通过上面的工作台中间件（<em>LZWorkTableComponents_Category</em>）进行通讯，而不是直接导入 <em>#import “LZNewDoctorPrescribingViewController.h”</em> 头文件调用。具体事例，如下：</p>
<p>在患者管理组件中，</p>
<pre><code class="objectivec">#import &lt;LZWorkTableComponents_Category/LZMediator+LZWorkTableComponents.h&gt;

  NSDictionary *pationModelDic = model.mj_keyValues;
  UIViewController *newDoctorVC = [[LZMediator sharedInstance] LZWorkTableComponents_newDoctorPrescribingViewControllerWithDic:pationModelDic];
  [weakSelf presentViewController: newDoctorVC animated:YES completion:nil];
</code></pre>
<p>这里通过一个 <em>LZMediator</em> 的单例来调用工作台中间件（<em>LZWorkTableComponents_Category</em>）中 <em>LZMediator</em> 的类别(<em>LZMediator+LZWorkTableComponents</em>) 中的方法，获得 <em>view controller</em> 之后，在这种场景下，到底 <em>push</em> 还是 <em>present</em> ，其实是要由使用者决定的，<em>mediator</em> 只要给出 <em>view controller</em> 的实例就好了。</p>
<h2 id="原工程中资源文件的处理"><a href="#原工程中资源文件的处理" class="headerlink" title="原工程中资源文件的处理"></a>原工程中资源文件的处理</h2><p>图片文件的处理以及读取方式</p>
<h2 id="受工期影响"><a href="#受工期影响" class="headerlink" title="受工期影响"></a>受工期影响</h2><ol>
<li>抽取组件前未将项目中冗余的类删除，导致这些类最后被抽到组件中；</li>
<li>在抽取组件时，版本仍在继续迭代，这就造成组件抽取完成后，需要再花时间合并新代码到组件中；</li>
<li>前期为了快速分离功能组件，往往将与该组件关联的其它功能模块的代码也抽到组件中；</li>
</ol>
<p>出现 <em>2</em> 中的情况，就需要记录一下新版本迭代修改了组件中的哪些类，还要记录提测后修改 <em>QA</em> 提出的 bug 时修改了哪些类，最后，再对比 <em>Git</em> 和 <em>svn</em> 的提交日志，查看修改了哪些类。</p>
<h2 id="抽离各模块功能组件遇到的问题及解决方式"><a href="#抽离各模块功能组件遇到的问题及解决方式" class="headerlink" title="抽离各模块功能组件遇到的问题及解决方式"></a>抽离各模块功能组件遇到的问题及解决方式</h2><ol>
<li>蓝牙打印的问题</li>
<li>iOS 9.3.5 系统下，页面布局错乱的问题</li>
</ol>
<h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><ul>
<li>壳工程</li>
<li>去除主工程 <em>Assets.xcassets</em> 目录下的多余资源文件(这些文件已抽到各个业务功能组件中)</li>
<li>组件化方案中的去model设计</li>
<li>将各个功能模块中涉及到数据库组件，<em>SQLite</em> 的查询语句都移动到数据库组件中</li>
</ul>
<font size="6" color="B22222"> 未完，待续… </font>

<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="https://casatwy.com/iosying-yong-jia-gou-tan-kai-pian.html" target="_blank" rel="external">iOS应用架构谈 开篇 - Casa Taloyum</a></p>
<p><a href="https://casatwy.com/iosying-yong-jia-gou-tan-viewceng-de-zu-zhi-he-diao-yong-fang-an.html" target="_blank" rel="external">iOS应用架构谈 view层的组织和调用方案 - Casa Taloyum</a></p>
<p><a href="https://casatwy.com/iosying-yong-jia-gou-tan-wang-luo-ceng-she-ji-fang-an.html" target="_blank" rel="external">iOS应用架构谈 网络层设计方案 - Casa Taloyum</a></p>
<p><a href="https://casatwy.com/iosying-yong-jia-gou-tan-ben-di-chi-jiu-hua-fang-an-ji-dong-tai-bu-shu.html" target="_blank" rel="external">iOS应用架构谈 本地持久化方案及动态部署 - Casa Taloyum</a></p>
<p><a href="https://casatwy.com/iOS-Modulization.html" target="_blank" rel="external">iOS应用架构谈 组件化方案 - Casa Taloyum</a></p>
<p><a href="https://github.com/casatwy/CTMediator" target="_blank" rel="external">CTMediator</a></p>
<p><a href="http://www.ximublog.cn/modularization/" target="_blank" rel="external">组件化方案调研</a></p>
<p><a href="https://blog.cnbluebox.com/blog/2015/11/28/module-and-decoupling/" target="_blank" rel="external">模块化与解耦</a></p>
<p><a href="https://git-scm.com/book/zh/v2/服务器上的-Git-GitLab" target="_blank" rel="external">服务器上的 Git - GitLab</a></p>
<p>–EOF–</p>
<p>若无特别说明，本站文章均为原创，转载请保留链接，谢谢</p>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
    <!-- 使用 Gitalk -->
<div id="gitalk-comment">
    <!-- Gitalk 评论框 -->
<div id="gitalk-container"></div>

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">

<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<script>
    var gitalk = new Gitalk({
            clientID: '664d164a7c2910ff9c32',
            clientSecret: '312260816c7af1b87c16b13906b55270ba8a1736',
            repo: 'BlogGitalks',
            owner: 'xibhe',
            admin: ['xibhe'],
            // facebook-like distraction free mode
            distractionFreeMode: false
        })
   gitalk.render('gitalk-container')
</script>

</div>
<style>
    #gitalk-comment {
        background-color: #eee;
        padding: 2pc;
    }
</style>

                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2018/05/28/Compiling/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.jpg);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.jpg" alt="XibHe's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        huahuaaihehe@gmail.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="#" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2018/07/">七月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/05/">五月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/04/">四月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/03/">三月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/02/">二月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/12/">十二月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/11/">十一月 2017<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/10/">十月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/09/">九月 2017<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/08/">八月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/07/">七月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/06/">六月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/05/">五月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/04/">四月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/03/">三月 2017<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/02/">二月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/01/">一月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/12/">十二月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/09/">九月 2016<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/08/">八月 2016<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/07/">七月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/01/">一月 2016<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/JavaScript/">JavaScript<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/Objective-C/">Objective-C<span class="sidebar_archives-count">9</span></a></li><li><a class="sidebar_archives-link" href="/categories/架构/">架构<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/解惑/">解惑<span class="sidebar_archives-count">10</span></a></li><li><a class="sidebar_archives-link" href="/categories/设计模式/">设计模式<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/译文/">译文<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/categories/阅读/">阅读<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/随笔/">随笔<span class="sidebar_archives-count">7</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/quotes" title="引述">
                
                    <i class="material-icons sidebar-material-icons">star rate</i>
                
                引述
            </a>
        </li>
        
    
        <li>
            <a href="/tags" title="标签云">
                
                    <i class="material-icons sidebar-material-icons">search</i>
                
                标签云
            </a>
        </li>
        
    
        <li>
            <a href="/about" title="关于我">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                关于我
            </a>
        </li>
        
    
        <li>
            <a href="/links" title="友情链接">
                
                    <i class="material-icons sidebar-material-icons">link</i>
                
                友情链接
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/heheaihuahua" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-twitter">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/profile.php?id=100010683492211" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-facebook">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/xibhe" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
    
    <!-- V2EX -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;2016&nbsp;-<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>XibHe's Blog
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?V/53wGualMuiPM3xoetD5Q==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>









   <!-- GitTalk -->









<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->

    
        
            <script>lsloader.load("prettify_js","/js/prettify.min.js?WN07fivHQSMKWy7BmHBB6w==", true)</script>
        
    



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
        
            $(function() {
                $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto;');
                prettyPrint();
                })
        
    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.2 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
